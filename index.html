<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Plateformer ASCII Pro</title>
  <link rel="stylesheet" href="style.css" />
  <!-- Polices pour l’overlay (style Hollow Knight-like) -->
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Cinzel+Decorative:wght@700&display=swap" rel="stylesheet">
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg'/%3E">
</head>
<body>
  <div id="gameRoot">
    <canvas id="gameCanvas"></canvas>

    <!-- HUD / UI -->
    <div class="ui-top-left">
      <div class="hud-controls">← → / A D pour bouger  |  Espace / W / ↑ pour sauter</div>
      <div class="hud-level">Niveau: <span id="hudLevel">map1</span></div>
      <div class="hud-cp">Checkpoint: <span id="hudCP">—</span></div>

      <!-- Coordonnées joueur (tuiles uniquement) -->
      <div class="hud-pos">Coord.: <span id="hudPos">[0,0]</span></div>

      <!-- Conteneur des toasts de loot -->
      <div id="lootToasts" class="loot-toasts"></div>
    </div>

    <div class="ui-top-right">
      <div class="hud">
        <!-- Pièces avec icône -->
        <span class="hud-item coin-hud">
          <span class="coin-icon" aria-hidden="true">
            <svg viewBox="0 0 24 24" width="18" height="18">
              <defs>
                <radialGradient id="coinGrad" cx="35%" cy="35%" r="75%">
                  <stop offset="0%"  stop-color="#fff59d"/>
                  <stop offset="45%" stop-color="#f7d354"/>
                  <stop offset="100%" stop-color="#d4a017"/>
                </radialGradient>
              </defs>
              <ellipse cx="12" cy="12" rx="10" ry="10" fill="#b07a00"/>
              <circle cx="12" cy="11" r="9" fill="url(#coinGrad)" />
              <circle cx="12" cy="11" r="9" fill="none" stroke="rgba(0,0,0,0.15)" stroke-width="1"/>
              <circle cx="12" cy="11" r="6" fill="none" stroke="rgba(255,255,255,0.35)" stroke-width="1"/>
            </svg>
          </span>
          <span id="hudCoins">0</span>
        </span>

        <!-- Total de clés (x / 4) -->
        <span class="hud-item">🔑 <span id="hudKeysTotal">0 / 4</span></span>

        <!-- Clés par couleur (ordre: rouge, bleu, vert, jaune) -->
        <span class="hud-item keys-row">
          🔴 <span id="hudKeyR">0</span>
          🔵 <span id="hudKeyB">0</span>
          🟢 <span id="hudKeyG">0</span>
          🟡 <span id="hudKeyY">0</span>
        </span>

        <span class="hud-item">⏱ <span id="hudTime">0:00</span></span>
        <span class="hud-item">☠️ <span id="hudDeaths">0</span></span>
      </div>
      <div class="buttons">
        <button id="btnPause" title="Pause (P ou Échap)">⏸</button>
        <button id="btnMute" title="Son on/off (M)">🔈</button>
        <button id="btnFullscreen" title="Plein écran (F)">⛶</button>
      </div>
    </div>

    <!-- Panel principal (pause/victoire/dev) -->
    <div id="panel" class="panel hidden">
      <div class="panel-content">
        <h2 id="panelTitle">Pause</h2>
        <p id="panelText"></p>
        <div class="panel-actions">
          <button id="btnResume">Reprendre</button>
          <button id="btnRestart">Recommencer (R)</button>
          <button id="btnNext" class="hidden">Niveau suivant (N)</button>
          <button id="btnClose">Fermer</button>
        </div>
      </div>
    </div>

    <!-- OVERLAY "Nom de checkpoint" (Hollow Knight-like) -->
    <div id="discovery" class="discovery hidden">
      <div id="discName" class="discovery-name">Nom du checkpoint</div>
    </div>
  </div>

  <!-- Scripts (ordre important) -->
  <script src="audio.js"></script>
  <script src="particles.js"></script>
  <script src="checkpoint-meta.js"></script>
  <script src="level.js"></script>
  <script src="entities.js"></script>
  <script src="fov.js"></script>
  <script src="physics.js"></script>
  <script src="renderer.js"></script>
  <script src="ui.js"></script>
  <script src="script.js"></script>
</body>
</html>